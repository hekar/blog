<!DOCTYPE html><html lang="en"><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="apple-touch-icon" sizes="180x180" href="/favicon/apple-touch-icon.png"/><link rel="icon" type="image/png" sizes="32x32" href="/favicon/favicon-32x32.png"/><link rel="icon" type="image/png" sizes="16x16" href="/favicon/favicon-16x16.png"/><link rel="manifest" href="/favicon/site.webmanifest"/><link rel="mask-icon" href="/favicon/safari-pinned-tab.svg" color="#000000"/><link rel="shortcut icon" href="/favicon/favicon.ico"/><meta name="msapplication-TileColor" content="#000000"/><meta name="msapplication-config" content="/favicon/browserconfig.xml"/><meta name="theme-color" content="#000"/><link rel="alternate" type="application/rss+xml" href="/feed.xml"/><meta name="description" content="Mov Blog - Mov instructions building complete systems."/><meta property="og:image" content="https://og-image.vercel.app/Next.js%20Blog%20Starter%20Example.png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fnextjs-black-logo.svg"/><title>Thinkpad T520 - OpenSUSE 13.2 | Mov Blog</title><meta property="og:image" content=""/><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.2.0/styles/github.min.css"/><meta name="next-head-count" content="17"/><link rel="preload" href="/blog/_next/static/css/2fb5138e8c8527d4.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/2fb5138e8c8527d4.css" data-n-g=""/><link rel="preload" href="/blog/_next/static/css/cf121497002c184d.css" as="style"/><link rel="stylesheet" href="/blog/_next/static/css/cf121497002c184d.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/blog/_next/static/chunks/polyfills-c67a75d1b6f99dc8.js"></script><script src="/blog/_next/static/chunks/webpack-4d5208940e01a3dc.js" defer=""></script><script src="/blog/_next/static/chunks/framework-4556c45dd113b893.js" defer=""></script><script src="/blog/_next/static/chunks/main-ee613568123ae71a.js" defer=""></script><script src="/blog/_next/static/chunks/pages/_app-6cff62718d504bfc.js" defer=""></script><script src="/blog/_next/static/chunks/34-3cca6a3b523c4f79.js" defer=""></script><script src="/blog/_next/static/chunks/pages/posts/%5Bslug%5D-c71d95ce7626635e.js" defer=""></script><script src="/blog/_next/static/8hHALvY9GgZh87Tdh2K_K/_buildManifest.js" defer=""></script><script src="/blog/_next/static/8hHALvY9GgZh87Tdh2K_K/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="min-h-screen"><div class="border-b bg-accent-1 border-accent-2"><div class="container mx-auto px-5"><div class="py-2 text-center text-sm"></div></div></div><main><div class="container mx-auto px-5"><section class="mb-16"><h2 class="text-2xl md:text-4xl font-bold tracking-tight md:tracking-tighter leading-tight mb-8 mt-8"><a class="hover:underline" href="/blog">Mov Log</a></h2><a class="hover:underline cursor-pointer"><span style="box-sizing:border-box;display:inline-block;overflow:hidden;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;position:relative;max-width:100%"><span style="box-sizing:border-box;display:block;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0;max-width:100%"><img style="display:block;max-width:100%;width:initial;height:initial;background:none;opacity:1;border:0;margin:0;padding:0" alt="" aria-hidden="true" src="data:image/svg+xml,%3csvg%20xmlns=%27http://www.w3.org/2000/svg%27%20version=%271.1%27%20width=%2716%27%20height=%2716%27/%3e"/></span><img src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" decoding="async" data-nimg="intrinsic" class="align-middle pt-4" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%"/><noscript><img src="/blog/_next/static/media/back.e4267c42.png" decoding="async" data-nimg="intrinsic" style="position:absolute;top:0;left:0;bottom:0;right:0;box-sizing:border-box;padding:0;border:none;margin:auto;display:block;width:0;height:0;min-width:100%;max-width:100%;min-height:100%;max-height:100%" class="align-middle pt-4" loading="lazy"/></noscript></span> <span class="md:text-xl">Articles</span></a></section><article class="mb-32"><div class="max-w-2xl"><h1 class="text-4xl md:text-4xl lg:text-4xl font-bold tracking-tighter leading-tight md:leading-none mb-4">Thinkpad T520 - OpenSUSE 13.2</h1><div class="block mb-6"><div class="flex items-center"><div class="text-xl font-bold">Hekar Khani</div></div></div><div class="mb-6 text-lg"><time dateTime="2015-05-21">May	21, 2015</time></div></div><div class="max-w-6xl"><div class="markdown-styles_markdown__h_8de"><p>Getting a Thinkpad T520’s NVIDIA Quadro video card working with OpenSUSE 13.2 or other modern distributions does not have to be the hard.</p>
<p>Many modern laptops only support video output (DVI, HDMI, Display Port) on the dedicated GPU. Fortunately, on the T520, we can easily configure Linux to use the NVIDIA video card as the primary card. Avoiding any screen tearing or other issues you're traditionally notice from the video output being copied between the integrated and dedicated graphics processors.</p>
<hr>
<p>Keep in mind, that this means losing the efficiency of the Intel video card. There is little to work around to this solution as configuring the Intel and NVIDIA cards to work together with a stable and performant digital output signal is rather complicated. I will not cover this in this tutorial. Instead, I have underclocked my NVIDIA card to deal with the fact that it generates more heat than the Intel based card.</p>
<p>Heat dispersion is important, as the CPU and GPU on main laptops are connected to the same heatsink. Constant usage of the higher end video card can result in excessive heat generation and rise the CPU temperature. This can drastically affect speeds, as the CPU will lower its clock speed to compensate for the temperature rise.</p>
<p>This tutorial assumes that you have the Linux distribution installed already installed. <strong>If you are having trouble installing the Linux distribution, because it freezes when loading X11 disable ACPI</strong>.</p>
<h2>1. Configure the BIOS</h2>
<p>The most important step is to configure the BIOS to use the NVIDIA card rather than Optimus. This can be done by selecting the Display configuration option located under the Hardware section of the BIOS. You may also configure your primary display output (ie. DVI 1, DVI 2, Display Port 1, etc.). The configuration of the primary display output even works with the Lenovo Docking stations.</p>
<h2>2. Install the NVIDIA proprietary driver</h2>
<p>From here on is OpenSUSE 13.2 specific.</p>
<p><a href="https://en.opensuse.org/SDB:NVIDIA_drivers#The_repository_way">https://en.opensuse.org/SDB:NVIDIA_drivers#The_repository_way</a></p>
<p>Installing the NVIDIA driver is pretty simple. Do not reboot until you have fully configured OpenSuse.</p>
<pre><code class="hljs language-sh">zypper ar -f ftp://download.nvidia.com/opensuse/13.2/ nvidia
sudo zypper <span class="hljs-keyword">in</span> x11-video-nvidiaG04
</code></pre>
<h2>3. Blacklist the Nouveau and Intel driver</h2>
<p>Append <code>blacklist i915</code> and <code>blacklist nouveau</code> to "/etc/modprobe.d/50-blacklist.conf":</p>
<pre><code class="hljs language-sh">blacklist i915
blacklist nouveau
</code></pre>
<h3>Commands</h3>
<pre><code class="hljs language-sh"><span class="hljs-built_in">echo</span> <span class="hljs-string">'blacklist i915'</span> | sudo <span class="hljs-built_in">tee</span>  --append /etc/modprobe.d/50-blacklist.conf
<span class="hljs-built_in">echo</span> <span class="hljs-string">'blacklist nouveau'</span> | sudo <span class="hljs-built_in">tee</span>  --append /etc/modprobe.d/50-blacklist.conf
</code></pre>
<h2>4. Configure Kernel Parameters</h2>
<p>Edit /etc/default/grub</p>
<pre><code class="hljs language-sh">sudo vim /etc/default/grub
</code></pre>
<p>Change</p>
<pre><code class="hljs language-sh">GRUB_CMDLINE_LINUX_DEFAULT=<span class="hljs-string">" BOOT_IMAGE=/boot/x86_64/loader/linux ramdisk_size=512000 ramdisk_blocksize=4096 resume=/dev/sda2"</span>
</code></pre>
<p>To look like (append <code>acpi_osi=Linux nomodeset</code> to <code>GRUB_CMDLINE_LINUX_DEFAULT</code>):</p>
<pre><code class="hljs language-sh">GRUB_CMDLINE_LINUX_DEFAULT=<span class="hljs-string">" BOOT_IMAGE=/boot/x86_64/loader/linux ramdisk_size=512000 ramdisk_blocksize=4096 resume=/dev/sda2 acpi_osi=Linux nomodeset"</span>
</code></pre>
<p>Afterwards run:</p>
<pre><code class="hljs language-sh">sudo grub2-mkconfig -o /boot/grub2/grub.cfg
</code></pre>
<p>Hopefully it all works out.</p>
<h2>5. Troubleshooting</h2>
<p>Most of my issues have usually been ACPI configuration. If you have a different laptop try removing <code>acpi_osi=Linux</code> or using various other ACPI configuration options.</p>
<p>See for more information: <a href="https://tr.opensuse.org/SDB:Kernel_Parameters_for_ACPI/APIC">https://tr.opensuse.org/SDB:Kernel_Parameters_for_ACPI/APIC</a></p>
<p>Message me on Twitter or visit the OpenSUSE forums for help.</p></div></div></article></div></main></div><footer class="bg-accent-1 border-t border-accent-2"><div class="container mx-auto px-5"></div></footer></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"post":{"title":"Thinkpad T520 - OpenSUSE 13.2","date":"2015-05-21","slug":"2015-05-21-opensuse-lenovo-t520","content":"\u003cp\u003eGetting a Thinkpad T520’s NVIDIA Quadro video card working with OpenSUSE 13.2 or other modern distributions does not have to be the hard.\u003c/p\u003e\n\u003cp\u003eMany modern laptops only support video output (DVI, HDMI, Display Port) on the dedicated GPU. Fortunately, on the T520, we can easily configure Linux to use the NVIDIA video card as the primary card. Avoiding any screen tearing or other issues you're traditionally notice from the video output being copied between the integrated and dedicated graphics processors.\u003c/p\u003e\n\u003chr\u003e\n\u003cp\u003eKeep in mind, that this means losing the efficiency of the Intel video card. There is little to work around to this solution as configuring the Intel and NVIDIA cards to work together with a stable and performant digital output signal is rather complicated. I will not cover this in this tutorial. Instead, I have underclocked my NVIDIA card to deal with the fact that it generates more heat than the Intel based card.\u003c/p\u003e\n\u003cp\u003eHeat dispersion is important, as the CPU and GPU on main laptops are connected to the same heatsink. Constant usage of the higher end video card can result in excessive heat generation and rise the CPU temperature. This can drastically affect speeds, as the CPU will lower its clock speed to compensate for the temperature rise.\u003c/p\u003e\n\u003cp\u003eThis tutorial assumes that you have the Linux distribution installed already installed. \u003cstrong\u003eIf you are having trouble installing the Linux distribution, because it freezes when loading X11 disable ACPI\u003c/strong\u003e.\u003c/p\u003e\n\u003ch2\u003e1. Configure the BIOS\u003c/h2\u003e\n\u003cp\u003eThe most important step is to configure the BIOS to use the NVIDIA card rather than Optimus. This can be done by selecting the Display configuration option located under the Hardware section of the BIOS. You may also configure your primary display output (ie. DVI 1, DVI 2, Display Port 1, etc.). The configuration of the primary display output even works with the Lenovo Docking stations.\u003c/p\u003e\n\u003ch2\u003e2. Install the NVIDIA proprietary driver\u003c/h2\u003e\n\u003cp\u003eFrom here on is OpenSUSE 13.2 specific.\u003c/p\u003e\n\u003cp\u003e\u003ca href=\"https://en.opensuse.org/SDB:NVIDIA_drivers#The_repository_way\"\u003ehttps://en.opensuse.org/SDB:NVIDIA_drivers#The_repository_way\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eInstalling the NVIDIA driver is pretty simple. Do not reboot until you have fully configured OpenSuse.\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sh\"\u003ezypper ar -f ftp://download.nvidia.com/opensuse/13.2/ nvidia\nsudo zypper \u003cspan class=\"hljs-keyword\"\u003ein\u003c/span\u003e x11-video-nvidiaG04\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e3. Blacklist the Nouveau and Intel driver\u003c/h2\u003e\n\u003cp\u003eAppend \u003ccode\u003eblacklist i915\u003c/code\u003e and \u003ccode\u003eblacklist nouveau\u003c/code\u003e to \"/etc/modprobe.d/50-blacklist.conf\":\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sh\"\u003eblacklist i915\nblacklist nouveau\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch3\u003eCommands\u003c/h3\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sh\"\u003e\u003cspan class=\"hljs-built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'blacklist i915'\u003c/span\u003e | sudo \u003cspan class=\"hljs-built_in\"\u003etee\u003c/span\u003e  --append /etc/modprobe.d/50-blacklist.conf\n\u003cspan class=\"hljs-built_in\"\u003eecho\u003c/span\u003e \u003cspan class=\"hljs-string\"\u003e'blacklist nouveau'\u003c/span\u003e | sudo \u003cspan class=\"hljs-built_in\"\u003etee\u003c/span\u003e  --append /etc/modprobe.d/50-blacklist.conf\n\u003c/code\u003e\u003c/pre\u003e\n\u003ch2\u003e4. Configure Kernel Parameters\u003c/h2\u003e\n\u003cp\u003eEdit /etc/default/grub\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sh\"\u003esudo vim /etc/default/grub\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eChange\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sh\"\u003eGRUB_CMDLINE_LINUX_DEFAULT=\u003cspan class=\"hljs-string\"\u003e\" BOOT_IMAGE=/boot/x86_64/loader/linux ramdisk_size=512000 ramdisk_blocksize=4096 resume=/dev/sda2\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eTo look like (append \u003ccode\u003eacpi_osi=Linux nomodeset\u003c/code\u003e to \u003ccode\u003eGRUB_CMDLINE_LINUX_DEFAULT\u003c/code\u003e):\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sh\"\u003eGRUB_CMDLINE_LINUX_DEFAULT=\u003cspan class=\"hljs-string\"\u003e\" BOOT_IMAGE=/boot/x86_64/loader/linux ramdisk_size=512000 ramdisk_blocksize=4096 resume=/dev/sda2 acpi_osi=Linux nomodeset\"\u003c/span\u003e\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAfterwards run:\u003c/p\u003e\n\u003cpre\u003e\u003ccode class=\"hljs language-sh\"\u003esudo grub2-mkconfig -o /boot/grub2/grub.cfg\n\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eHopefully it all works out.\u003c/p\u003e\n\u003ch2\u003e5. Troubleshooting\u003c/h2\u003e\n\u003cp\u003eMost of my issues have usually been ACPI configuration. If you have a different laptop try removing \u003ccode\u003eacpi_osi=Linux\u003c/code\u003e or using various other ACPI configuration options.\u003c/p\u003e\n\u003cp\u003eSee for more information: \u003ca href=\"https://tr.opensuse.org/SDB:Kernel_Parameters_for_ACPI/APIC\"\u003ehttps://tr.opensuse.org/SDB:Kernel_Parameters_for_ACPI/APIC\u003c/a\u003e\u003c/p\u003e\n\u003cp\u003eMessage me on Twitter or visit the OpenSUSE forums for help.\u003c/p\u003e"}},"__N_SSG":true},"page":"/posts/[slug]","query":{"slug":"2015-05-21-opensuse-lenovo-t520"},"buildId":"8hHALvY9GgZh87Tdh2K_K","assetPrefix":"/blog","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>