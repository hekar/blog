<!DOCTYPE html>
<html>
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="utf-8">
  

  
  <title>Hekar Khani</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="keywords" content="blog">
<meta property="og:type" content="website">
<meta property="og:title" content="Hekar Khani">
<meta property="og:url" content="https://hekar.github.io/blog/page/2/index.html">
<meta property="og:site_name" content="Hekar Khani">
<meta property="og:locale" content="en">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Hekar Khani">
  
    <link rel="alternate" href="/blog/atom.xml" title="Hekar Khani" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  
    <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  
  <link rel="stylesheet" href="/blog/css/style.css">
</head>
</html>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/blog/" id="logo">Hekar Khani</a>
        <span id="subtitle">Mov instructions masquerading as complex systems</span>
      </h1>
      
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/blog/">Home</a>
        
          <a class="main-nav-link" href="/blog/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/blog/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="https://hekar.github.io/blog"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-npm-scoped-packages" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2016/04/25/npm-scoped-packages/" class="article-date">
  <time datetime="2016-04-25T04:00:00.000Z" itemprop="datePublished">2016-04-25</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/node/">node</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2016/04/25/npm-scoped-packages/">Scoped Packages with npm-link</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>In the past few months, I have noticed that <code>npm link</code> and scoped packages have gone underused by my colleagues.<br>The <code>npm link</code> command is essential for quick development. And if you’re building private packages inside an organization, scoped packages can make managing and installing packages much simpler.</p>
<p>Before we can do anything, we need a scoped package. Fortunately, it’s as simple as naming the package in the following format: <code>@&lt;scope&gt;/&lt;package&gt;</code>.</p>
<p>For example, in <code>package.json</code>:<br><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="string">"name"</span>: <span class="string">"@mycompany/fast-lib"</span></span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>Sometimes you want to make changes to a dependency while working on an application. This means you have both repositories on your local machine and are making modifications. You could manually sync them using <code>npm install</code>, but there’s an easier way. Create a symbolic link using <code>npm link</code>.</p>
<p>The synopsis from the <code>npm</code> documentation states that the npm link command only takes a single argument. The name of the [scoped] package.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">npm link (in package dir)</span><br><span class="line">npm link [&lt;@scope&gt;/]&lt;pkg&gt;[@&lt;version&gt;]</span><br><span class="line"></span><br><span class="line">alias: npm ln</span><br></pre></td></tr></table></figure>
<p>Using <code>npm link</code> is easier than it seems. You do not need to chdir outside your project’s folder.</p>
<p>To link a scoped package to a project:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm link &lt;path-to-dependency&gt; @scope/&lt;package&gt;[@version]</span><br></pre></td></tr></table></figure></p>
<p>Same goes for non-scoped packages:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm link &lt;path-to-dependency&gt; &lt;package&gt;[@version]</span><br></pre></td></tr></table></figure></p>
<p><code>@version</code> is optional.</p>
<p>Example:<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm link ../fast-lib @mycompany/fast-lib@1.0.0</span><br></pre></td></tr></table></figure></p>
<p>To validate that it worked, check the folder in <code>node_modules/</code> to make sure it’s a symlink and points to the correct folder.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">ls -l node_modules/@scope/&lt;package&gt;</span><br><span class="line"># or</span><br><span class="line">ls -l node_modules/&lt;package&gt;</span><br></pre></td></tr></table></figure>
<p>You should see a reference to the folder containing the project.</p>
<p>To use a private npm registry for your scoped packages, you need to setup an <code>.npmrc</code>. This does not apply if you’re using <a href="https://www.npmjs.com/npm/private-packages" target="_blank" rel="noopener">npmjs.com</a>. See their <a href="https://docs.npmjs.com/orgs/what-are-orgs" target="_blank" rel="noopener">documentation</a> for details.</p>
<p>Getting authenticated with your respective npm registry is different depending on where your packages are hosted. The configuration of the <code>.npmrc</code> is always the same though.<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">@&lt;scope&gt;:registry=https://&lt;your-npm-registry&gt;/</span><br><span class="line">//&lt;your-npm-registry&gt;/:_password=&lt;password-base-64&gt;</span><br><span class="line">//&lt;your-npm-registry&gt;/:username=&lt;username&gt;</span><br><span class="line">//&lt;your-npm-registry&gt;/:email=&lt;email&gt;</span><br><span class="line">//&lt;your-npm-registry&gt;/:always-auth=true</span><br></pre></td></tr></table></figure></p>
<p>The <code>.npmrc</code> is read from the following locations in the order:</p>
<ol>
<li>per-project config file (/path/to/my/project/.npmrc)</li>
<li>per-user config file (~/.npmrc)</li>
<li>global config file ($PREFIX/etc/npmrc)</li>
<li>npm builtin config file (/path/to/npm/npmrc)</li>
</ol>
<p>That’s all you need to know about <code>npm link</code> and a primer on <a href="https://docs.npmjs.com/misc/scope" target="_blank" rel="noopener">scoped packages</a>.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://hekar.github.io/blog/2016/04/25/npm-scoped-packages/" data-id="cjzge6qgd0000i0uy3788lr0d" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/nodejs/">nodejs</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-opensuse-lenovo-t520" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2015/05/21/opensuse-lenovo-t520/" class="article-date">
  <time datetime="2015-05-21T04:00:00.000Z" itemprop="datePublished">2015-05-21</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/linux/">linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2015/05/21/opensuse-lenovo-t520/">Thinkpad T520 - OpenSUSE 13.2</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Getting a Thinkpad T520’s NVIDIA Quadro video card working with OpenSUSE 13.2 or other modern distributions does not have to be the hard.</p>
<p>The main issue with many modern business oriented laptops seem to be that the digital video (DVI, HDMI, Display Port) signals can only be output from the NVIDIA cards. Fortunately, on the T520, we can easily configure Linux to use the NVIDIA video card as the primary card.</p>
<p>Keep in mind, that this means losing the efficiency of the Intel video card. There is little to work around to this solution as configuring the Intel and NVIDIA cards to work together with a stable and performant digital output signal is rather complicated. I will not cover this in this tutorial. Instead, I have underclocked my NVIDIA card to deal with the fact that it generates more heat than the Intel based card.</p>
<p>Heat dispersion is important, as the CPU and GPU on main laptops are connected to the same heatsink. Constant usage of the higher end video card can result in excessive heat generation and rise the CPU temperature. This can drastically affect speeds, as the CPU will lower its clock speed to compensate for the temperature rise.</p>
<p>This tutorial assumes that you have the Linux distribution installed already installed. <strong>If you are having trouble installing the Linux distribution, because it freezes when loading X11 disable ACPI</strong>.</p>
<h2 id="1-Configure-the-BIOS"><a href="#1-Configure-the-BIOS" class="headerlink" title="1. Configure the BIOS"></a>1. Configure the BIOS</h2><p>The most important step is to configure the BIOS to use the NVIDIA card rather than Optimus. This can be done by selecting the Display configuration option located under the Hardware section of the BIOS. You may also configure your primary display output (ie. DVI 1, DVI 2, Display Port 1, etc.). The configuration of the primary display output even works with the Lenovo Docking stations.</p>
<h2 id="2-Install-the-NVIDIA-proprietary-driver"><a href="#2-Install-the-NVIDIA-proprietary-driver" class="headerlink" title="2. Install the NVIDIA proprietary driver"></a>2. Install the NVIDIA proprietary driver</h2><p>From here on is OpenSUSE 13.2 specific.</p>
<p><a href="https://en.opensuse.org/SDB:NVIDIA_drivers#The_repository_way" target="_blank" rel="noopener">https://en.opensuse.org/SDB:NVIDIA_drivers#The_repository_way</a></p>
<p>Installing the NVIDIA driver is pretty simple. Do not reboot until you have fully configured OpenSuse.</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">zypper ar -f ftp://download.nvidia.com/opensuse/13.2/ nvidia</span><br><span class="line">sudo zypper in x11-video-nvidiaG04</span><br></pre></td></tr></table></figure>
<h2 id="3-Blacklist-the-Nouveau-and-Intel-driver"><a href="#3-Blacklist-the-Nouveau-and-Intel-driver" class="headerlink" title="3. Blacklist the Nouveau and Intel driver"></a>3. Blacklist the Nouveau and Intel driver</h2><p>Append <code>blacklist i915</code> and <code>blacklist nouveau</code> to “/etc/modprobe.d/50-blacklist.conf”:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">blacklist i915</span><br><span class="line">blacklist nouveau</span><br></pre></td></tr></table></figure>
<h3 id="Commands"><a href="#Commands" class="headerlink" title="Commands"></a>Commands</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">echo &apos;blacklist i915&apos; | sudo tee  --append /etc/modprobe.d/50-blacklist.conf</span><br><span class="line">echo &apos;blacklist nouveau&apos; | sudo tee  --append /etc/modprobe.d/50-blacklist.conf</span><br></pre></td></tr></table></figure>
<h2 id="4-Configure-Kernel-Parameters"><a href="#4-Configure-Kernel-Parameters" class="headerlink" title="4. Configure Kernel Parameters"></a>4. Configure Kernel Parameters</h2><p>Edit /etc/default/grub</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo vim /etc/default/grub</span><br></pre></td></tr></table></figure>
<p>Change</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRUB_CMDLINE_LINUX_DEFAULT=&quot; BOOT_IMAGE=/boot/x86_64/loader/linux ramdisk_size=512000 ramdisk_blocksize=4096 resume=/dev/sda2&quot;</span><br></pre></td></tr></table></figure>
<p>To look like (append <code>acpi_osi=Linux nomodeset</code> to <code>GRUB_CMDLINE_LINUX_DEFAULT</code>):</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">GRUB_CMDLINE_LINUX_DEFAULT=&quot; BOOT_IMAGE=/boot/x86_64/loader/linux ramdisk_size=512000 ramdisk_blocksize=4096 resume=/dev/sda2 acpi_osi=Linux nomodeset&quot;</span><br></pre></td></tr></table></figure>
<p>Afterwards run:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sudo grub2-mkconfig -o /boot/grub2/grub.cfg</span><br></pre></td></tr></table></figure>
<p>Hopefully it all works out.</p>
<h2 id="5-Troubleshooting"><a href="#5-Troubleshooting" class="headerlink" title="5. Troubleshooting"></a>5. Troubleshooting</h2><p>Most of my issues have usually been ACPI configuration. If you have a different laptop try removing <code>acpi_osi=Linux</code> or using various other ACPI configuration options.</p>
<p>See for more information: <a href="https://tr.opensuse.org/SDB:Kernel_Parameters_for_ACPI/APIC" target="_blank" rel="noopener">https://tr.opensuse.org/SDB:Kernel_Parameters_for_ACPI/APIC</a></p>
<p>Message me on Twitter or visit the OpenSUSE forums for help.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://hekar.github.io/blog/2015/05/21/opensuse-lenovo-t520/" data-id="cjzge6qgt0006i0uy8w492553" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/linux/">linux</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-zero-k-lobby-linux" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/blog/2013/11/24/zero-k-lobby-linux/" class="article-date">
  <time datetime="2013-11-24T05:00:00.000Z" itemprop="datePublished">2013-11-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/blog/categories/linux/">linux</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/blog/2013/11/24/zero-k-lobby-linux/">Building Zero-K Lobby on Linux</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>Though, I am no longer an avid video game player I happened to come across a real-time strategy game a few months ago. The game is called Zero-K, is freely avaliable and open source. While the game runs very well under Windows, I have experienced quite a few issues under Linux.<br>Recently, the game had stopped working altogether and I had been unsure of why.</p>
<p>After spending much time troubleshooting through “strace”, I had began to suspect that the problem lay in the Lobby frontend for the game, rather than the game itself.</p>
<p>The Lobby is written in C# and has some issues building on Mono, but there are simple workarounds.</p>
<h2 id="Quick-Fixes"><a href="#Quick-Fixes" class="headerlink" title="Quick Fixes"></a>Quick Fixes</h2><p><code>zero-k/other/.nugut/NuGet.targets</code> line 54:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(NuGetCommand) install &quot;$(PackagesConfig)&quot; -source &quot;$(PackageSources)&quot;  $(NonInteractiveSwitch) $(RequireConsentSwitch) -solutionDir &quot;$(SolutionDir) &quot;</span><br></pre></td></tr></table></figure>
<p>Should instead be<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$(NuGetCommand) install &quot;$(PackagesConfig)&quot; -source &quot;$(PackageSources)&quot;  $(NonInteractiveSwitch) $(RequireConsentSwitch) -solutionDir &quot;$(SolutionDir)&quot;</span><br></pre></td></tr></table></figure></p>
<p>Thereby removing the space after <code>$(SolutionDir)</code>. This was causing packages to be downloaded to <code>zero-k/other/ /packages</code> instead of <code>zero-k/other/packages</code>.</p>
<p>Afterwards, it should fail due to case sensitive file resolution on Linux. The solution is to disable case sensitivity with Mono builds:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">export MONO_IOMAP=all</span><br></pre></td></tr></table></figure>
<p>Volla! The ZeroK Lobby should have successfully compiled to a binary.</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="https://hekar.github.io/blog/2013/11/24/zero-k-lobby-linux/" data-id="cjzge6qhf000ti0uy8at6yeoc" class="article-share-link">Share</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/blog/tags/gamesonlinux/">gamesonlinux</a></li></ul>

    </footer>
  </div>
  
</article>


  


  <nav id="page-nav">
    
    <a class="extend prev" rel="prev" href="/blog/">&laquo; Prev</a><a class="page-number" href="/blog/">1</a><span class="page-number current">2</span><a class="page-number" href="/blog/page/3/">3</a><a class="page-number" href="/blog/page/4/">4</a><a class="page-number" href="/blog/page/5/">5</a><a class="extend next" rel="next" href="/blog/page/3/">Next &raquo;</a>
  </nav>

</section>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2019 Hekar Khani<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/blog/" class="mobile-nav-link">Home</a>
  
    <a href="/blog/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>



<script src="/blog/js/script.js"></script>



  </div>
</body>
</html>